---
// components
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Home from '@components/Home.astro';
import Work from "@components/Work.astro";
import Services from '@components/Services.astro';
import Projects from '@components/Projects.astro';
import About from '@components/About.astro';
import Contact from '@components/Contact.astro';

// meta
---

<Layout title="Billy Le">
  <Header />
  <main>
    <Home />
    <Work />
    <Services />
    <Projects />
    <About />
    <Contact />
  </main>
</Layout>
<style is:global>
  h2 {
    font-size: clamp(2rem, 5vw, 10rem);
    font-family: Vidaloka;
  }

  h4 {
    font-size: clamp(1.15rem, 1vw, 2.5rem);
  }

  p {
    font-size: clamp(1rem, 1vw, 2rem);
  }

  @keyframes text-fade-in {
    0% {
      opacity: 0;
      transform: translateY(100%);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
<script>
  const headingObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const target = entry.target as HTMLElement;
      if (entry.isIntersecting && !target.style.animation) {
        target.style.animation = "text-fade-in forwards .7s";
      }
    });
  });

  const paragraphsObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const target = entry.target as HTMLElement;
      if (entry.isIntersecting) {
        const paragraphs = target.querySelectorAll("p");
        for (let i = 0; i < paragraphs.length; i++) {
          const paragraph = paragraphs[i];
          if (paragraph) {
            paragraph.style.animation = `text-fade-in forwards .4s ${
              i * 0.2 + 0.8
            }s`;
          }
        }
      }
    });
  });

  const headings = document.querySelectorAll("h2");
  const paragraphSection = document.querySelectorAll(".p-fade");
  for (const heading of headings) {
    headingObserver.observe(heading);
  }

  for (const section of paragraphSection) {
    paragraphsObserver.observe(section);
  }
</script>
